# ä¸€ã€é¡¹ç›®ä»‹ç»
è¿™ä¸ªé¡¹ç›®å« bangumi-listã€‚

è‡ªå·±çš„ç•ªå‰§å°çªç”¨çš„æ˜¯alistï¼Œè¿™ç§è¿”ç’å½’çœŸçš„æ–¹æ³•å¯¼è‡´äº†ç•ªå‰§çš„å±•ç¤ºä¸å¤ªä¼˜é›…ã€‚
bangumi-list å°†ä¼šå®Œå–„è¿™ä¸€æ–¹é¢ã€‚

bangumi-list æ˜¯ä¸€ä¸ªå‰ç«¯ï¼Œç”¨äºæ•´ç†ä¸æ˜¾ç¤ºç•ªå‰§æ•°æ®ï¼Œé€šè¿‡ç•ªå‰§å¡ç‰‡ä¸­çš„ â€œä¸‹è½½/è§‚çœ‹â€æŒ‰é’® å¯ä»¥è·³è½¬åˆ°alistå¯¹åº”é¡µé¢ã€‚
bangumi-list é€šè¿‡è¯·æ±‚æœåŠ¡ä¸Šçš„ä¸€äº›æ–‡ä»¶æ¥è·å–ç•ªå‰§æ•°æ®ï¼Œæ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸Šçš„åç«¯ï¼Œç•ªå‰§æ•°æ®æ˜¯é€šè¿‡ä¸€ä¸ªpythonçˆ¬è™«ç”Ÿæˆçš„ï¼ˆä¼ªåç«¯ï¼‰ã€‚

ç½‘ç«™åœ°å€ï¼š https://bangumi.sakiko.top/

é¡¹ç›®åœ°å€
- ä¼ªåç«¯ï¼ˆpythonçˆ¬è™«ï¼‰
	https://github.com/haruki1953/crawl_post_generator
- å‰ç«¯ï¼ˆvue3 + ts + element-plusï¼‰
	https://github.com/haruki1953/bangumi-list-vue3
- å®ç°ç•ªå‰§æ›´æ–°ä¿¡æ¯çš„è„šæœ¬
    https://github.com/haruki1953/qb_auto
- å¼€å‘è®°å½•
	https://github.com/haruki1953/240525-bangumi-list-dev-diary

# äºŒã€ä¼ªåç«¯
ä¼ªåç«¯æ˜¯é€šè¿‡å¤šä¸ª`crawl_info.json`æ¥è·å–æ•°æ®çš„

åŸæœ¬çš„åŠŸèƒ½ä¸ºç”Ÿæˆç•ªå‰§ä»‹ç»ï¼Œä¿å­˜åœ¨crawl_infoä¸­saveFileæ‰€æŒ‡çš„readme.mdæ–‡ä»¶ä¸­ï¼Œaliståœ¨æ‰“å¼€ç›®å½•æ—¶ä¼šè§£æreadme.mdæ–‡ä»¶ï¼Œä»¥æ­¤åœ¨å¯¹åº”ç•ªå‰§ç›®å½•å±•ç¤ºç•ªå‰§ä»‹ç»

ç°åœ¨ä¹Ÿå¯ä»¥å°†çˆ¬å–çš„ç•ªå‰§æ•°æ®ä¿å­˜ï¼Œæ ¹æ®ä¸åŒçš„æºæ–‡ä»¶ç”Ÿæˆä¸åŒçš„`bgm_data-.json`ï¼ŒåŒæ—¶ç”Ÿæˆæˆ–ä¿®æ”¹`config.json`ï¼ˆä¿å­˜æœ€åä¿®æ”¹æ—¶é—´ï¼Œå‰ç«¯ä»¥æ­¤æ§åˆ¶æ•°æ®ç¼“å­˜ï¼‰

## å¯åŠ¨å‰æ‰€éœ€çš„é…ç½®
å‡†å¤‡crawl_info.json [crawl_info.jsonæ•°æ®ç»“æ„](#crawl_info.json)

### ä¿®æ”¹setting.py
```python
# crawl_info.json ä¿å­˜çˆ¬å–ä¿¡æ¯çš„jsonæ–‡ä»¶çš„è·¯å¾„
crawl_info_json = './test/crawl_info.json'

# ç•ªå‰§æ•°æ®æ–‡ä»¶ä¿å­˜è·¯å¾„
bgmDataSavePath = '/www/wwwroot/pan.sakiko.top/home/data'
# bgmDataSavePath = './data'

# alistç½‘ç«™çš„åŸºç¡€è·¯å¾„ï¼Œç”¨äºæˆªå–alistPath
alistBasePath = '/home/onedrive/Sakiko'
# alistç½‘ç«™ç½‘å€ï¼Œç”¨äºä¸æˆªå–çš„è·¯å¾„æ‹¼æ¥
alistWebUrl = 'https://bangumi.sakiko.top'
```
- crawl_info_jsonï¼šåœ¨æ‰§è¡Œmain.pyä¸é€šè¿‡å‚æ•°æä¾›crawl_infoæ—¶çš„é»˜è®¤æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥ä¸é…ç½®ï¼Œæˆ‘ä¹Ÿä¸€èˆ¬æ˜¯é€šè¿‡å‚æ•°æ¥æŒ‡å®šcrawl_infoæ–‡ä»¶è·¯å¾„
- bgmDataSavePathï¼šçˆ¬å–åç”Ÿæˆçš„ç•ªå‰§æ•°æ®æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼Œå°çªç½‘ç«™å‰ç«¯å­˜æ”¾åœ¨ `/www/wwwroot/pan.sakiko.top/home/`ï¼Œè¿™é‡Œè®¾ç½®åœ¨å…¶dataç›®å½•ä¸‹ï¼Œå‰ç«¯ä¼šè¯·æ±‚è¿™é‡Œçš„æ–‡ä»¶ï¼Œ[config.json](#config.json)ä¸[bgm_data-.json](#bgm_data-.json)éƒ½å°†å­˜æ”¾åœ¨è¿™é‡Œ
- alistBasePathã€alistWebUrlï¼šç”Ÿæˆçš„ç•ªå‰§æ•°æ®ä¸­éœ€è¦å…¶å¯¹åº”çš„alistç½‘ç«™é“¾æ¥ï¼Œå› ä¸ºä¹‹å‰çš„crawl_infoä¸­åªæœ‰readmeæ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼Œæˆ‘ä¹Ÿä¸æƒ³å†ä¸€ä¸ªä¸ªåŠ äº†ï¼Œæ‰€ä»¥å°±åˆ©ç”¨æ­£åˆ™ä»å…¶ä¸­æˆªå–è·¯å¾„ã€‚
	```
	å¦‚"saveFile": "/home/onedrive/Sakiko/Bangumi/ç•ªå‰§å/readme.md"
	æˆ‘çš„alistæ˜¯å°†/home/onedrive/Sakikoä½œä¸ºäº†ä¸»é¡µï¼ŒalistBasePathè®¾ç½®ä¸ºè¿™ä¸ªï¼Œ
	å°±ä¼šæˆªå–å‡º /Bangumi/ç•ªå‰§å ï¼Œä¹‹åä¼šå’ŒalistWebUrlæ‹¼æ¥å½¢æˆå®Œæ•´ç½‘å€
	```

### å‡†å¤‡å‘½ä»¤ï¼Œå‘½ä»¤å‚æ•°è¯´æ˜ï¼š
- `sys.argv[1]`ï¼ˆå¯é€‰ï¼‰
	æŒ‡å®š `crawl_info.json` æ–‡ä»¶çš„è·¯å¾„ã€‚
	ç¤ºä¾‹`python main.py /path/to/crawl_info.json`
- `sys.argv[2]`ï¼ˆå¯é€‰ï¼‰
	è®¾å®šè¿è¡Œæ¨¡å¼ï¼Œå¯é€‰å€¼ä¸º BL æˆ– onlyBL
	å½“ä¸æŒ‡å®šæ—¶ï¼Œç¨‹åºåªç”Ÿæˆhtmlï¼ˆæ ¹æ®crawl_infoä¿å­˜åœ¨å¯¹åº”æ–‡ä»¶ï¼‰
	å½“å€¼ä¸º BL æ—¶ï¼Œæ—¢ä¿å­˜htmlï¼Œä¹Ÿç”Ÿæˆç•ªå‰§æ•°æ®ï¼ˆä¿å­˜åœ¨bgmDataSavePathï¼‰
	å½“å€¼ä¸º onlyBL æ—¶ï¼Œåªä¿å­˜ç•ªå‰§æ•°æ®

æˆ‘æ˜¯ç”¨è¿‡å®å¡”é¢æ¿çš„è®¡åˆ’ä»»åŠ¡æ‰§è¡Œçš„ï¼Œæ‰§è¡Œå‘½ä»¤å¦‚ï¼š
```sh
python3 /root/crawl_post_generator/main.py /home/onedrive/crawl_info_24å››æœˆ.json BL
```


## ç›¸å…³æ•°æ®ç»“æ„
### crawl_info.json
```json
[
    {
        "saveFile": "/home/onedrive/Sakiko/Bangumi/BUCCHIGIRI?!/readme.md",
        "urlList": [
            {
                "source": "bangumi",
                "url": "https://bangumi.tv/subject/436745",
                "alistPath": "/Bangumi/BUCCHIGIRIï¼Ÿ!"
            }
            // ...
        ]
    }
    // ...
]
```
ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€é¡¹ä¸­saveFileæ§åˆ¶å…¶ä¿å­˜åœ¨çš„æ–‡ä»¶
- saveFileï¼šæ§åˆ¶å…¶ä¿å­˜åœ¨çš„æ–‡ä»¶
- urlListï¼šæ•°ç»„ï¼Œæ¯ä¸ªæ–‡ä»¶å†…å¯ä¿å­˜å¤šæ¡ç•ªå‰§ä»‹ç»
- sourceï¼šä¿¡æ¯æ¥æºï¼Œå› ä¸ºè¿™ä¸ªè„šæœ¬è¿˜å¯ä»¥çˆ¬å–è®ºå›çš„å¸–å­ï¼ˆcycgæ¬¡å…ƒèŒ¶é¦†ï¼‰ï¼Œæ‰€ä»¥éœ€è¦æ­¤å­—æ®µè¿›è¡Œæ ‡æ³¨ï¼Œçˆ¬å–bangumiæ—¶ä¸ºbangumi
- urlï¼šçˆ¬å–ç½‘ç«™çš„é“¾æ¥
- alistPathï¼ˆå¯é€‰ï¼‰ï¼Œåœ¨è‡ªåŠ¨æˆªå–åç§°é“¾æ¥å‡ºé—®é¢˜æ—¶è¿›è¡Œè¡¥æ­£
	ä¸€èˆ¬é€šè¿‡saveFileå­—æ®µå°±å¯ä»¥æˆªå–å‡ºæ­£ç¡®çš„alistè·¯å¾„ï¼Œä½†æå°‘æ•°æƒ…å†µä¸‹ä¼šæœ‰é—®é¢˜ï¼ˆç‰¹æ®Šå­—ç¬¦å¯¼è‡´alistç½‘å€è·¯å¾„ä¸æ–‡ä»¶ç³»ç»Ÿç›®å½•åä¸ä¸€è‡´ï¼‰ã€‚å¦‚æœå‘ç°è¿™ç§æƒ…å†µï¼Œå°±æ·»åŠ æ­£ç¡®çš„alistPath
	æ³¨æ„ï¼šæ²¡æœ‰ç½‘å€ï¼ˆåœ¨è„šæœ¬å†…ä¼šæ‹¼æ¥alistWebUrlï¼‰

### config.json
å‰ç«¯åœ¨æ¯æ¬¡æ‰“å¼€æ—¶ï¼Œéƒ½ä¼šè¯·æ±‚config.json
config.jsonï¼Œä¸»è¦è´Ÿè´£ä¿å­˜ç”Ÿæˆçš„`bgm_data.json`ç•ªå‰§æ•°æ®çš„ä¿¡æ¯ï¼Œå‰ç«¯æ®æ­¤è¯·æ±‚å¯¹åº”çš„æ–‡ä»¶ï¼Œå¹¶é€šè¿‡å…¶ä¸­çš„æœ€åä¿®æ”¹æ—¶é—´ï¼Œæ¥æ§åˆ¶åœ¨å¿…è¦æ—¶å†è¯·æ±‚æ•°æ®

### config.jsonè®¾è®¡ï¼ˆäºŒæœŸï¼‰
 [config.json](public\data\config.json) 
æ·»åŠ äº†ï¼šå‹æƒ…é“¾æ¥ï¼Œè”ç³»ä¿¡æ¯ï¼Œå…¬å‘Šï¼Œç‰ˆæœ¬æ§åˆ¶
```json
{
	// æ ‡è¯†ç‰ˆæœ¬çš„å­—ç¬¦ä¸²ï¼Œéšæ„å¡«å†™
	"version": "2407131435",
	// é€šçŸ¥
	"notification": {
		"id": "2407061947",
		"title": "æ¬¢è¿æ¥åˆ°ã€å°ç¥¥ã®å°çªã€‘ğŸ‰ğŸ‰ğŸ‰",
		"message": "ç‚¹å‡»å·¦ä¸‹è§’æˆ–å³ä¸Šè§’ï¼ŒåŠ å…¥Discordä¸€èµ·è¿½ç•ªå§ï¼",
		"type": "warning"
	},
	// å½“å‰å­£åº¦æ ‡è¯†ï¼Œå‰å››ä½ä»£è¡¨å¹´ä»½ï¼Œåä¸¤ä½ä»£è¡¨æœˆä»½ã€‚è®¾ç½®ä¸ºnullåˆ™ç”±ç”¨æˆ·æµè§ˆå™¨æ—¶é—´åˆ¤æ–­
	"currentQuarterKey": 202407,
	// å°†æ˜¾ç¤ºåœ¨æ—§ç•ªä¸Šæ¶é¡µé¢çš„ç•ªå‰§id
	"releaseOldBangumi": [
        "266070",
        "207195",
        "262898",
        "262897",
        "292970",
        "386809",
        "160209",
        "225021",
        "9717",
        "157622",
        "25833",
        "44692",
        "44693"
    ],
	// å°†æ˜¾ç¤ºåœ¨ç§å¿ƒæ¨èé¡µé¢çš„ç•ªå‰§id
	"personalRecommendationBangumi": [],
	// ç”¨äºåœ¨å…³äºé¡µé¢æ·»åŠ æ— åºåˆ—è¡¨ä¿¡æ¯
    "aboutList": [
        [
            {
                "tag": "b",
                "content": "å°ç¥¥ã®å°çª "
            },
            {
                "tag": "a",
                "content": "ã€bangumi.sakiko.topã€‘",
                "link": "https://bangumi.sakiko.top/"
            },
            {
                "tag": "b",
                "content": " å¤‡ç”¨åŸŸå "
            },
            {
                "tag": "a",
                "content": "ã€uika.topã€‘",
                "link": "https://uika.top/"
            }
        ],
        [
            {
                "tag": "",
                "content": "â€¦â€¦"
            }
        ]
    ],
	// æ˜¾ç¤ºåœ¨å…³äºé¡µé¢çš„è”ç³»æ–¹å¼
	"contact": [
        {
            "link": "https://twitter.com/harukiO_0",
            "img": "https://static.sakiko.top/sakiko/haruki_korisu_ts.jpg",
            "name": "harukiğŸ»",
            "isRadiu": true // æ˜¯å¦åœ†è§’
        },
        {
            "link": "https://discord.gg/nZWpvz2WNW",
            "img": "https://static.sakiko.top/sakiko/sakiko_ico_discord.png",
            "name": "Discord",
            "isRadiu": false
        },
	],
	// å‹æƒ…é“¾æ¥
	"friend": [
		{
            "link": "https://www.cycg.xyz/",
            "img": "https://www.cycg.xyz/favicon.ico",
            "name": "Sperteã®æ¬¡å…ƒèŒ¶é¦†",
            "isRadiu": false
        }
	],
	// ç•ªå‰§æ•°æ®æ–‡ä»¶çš„ä¿¡æ¯ï¼Œæ˜¯ç”±çˆ¬è™«è‡ªåŠ¨ç”Ÿæˆçš„
	"bgmFileList": [
        {
            "fileName": "bgm_data-crawl_info_23åæœˆ.json",
            "lastModified": "2024-07-02T03:32:16.204540",
            "showOnHome": false // æ˜¯å¦åœ¨é¦–é¡µæ˜¾ç¤ºï¼ˆå¯æ‰‹åŠ¨ä¿®æ”¹ï¼‰
        }
		// ...
	],
    // å‰ç«¯æ®æ­¤åœ¨ bgmLastUpdate å˜åŒ–æ—¶å†é‡æ–°è·å– update.json
    "bgmLastUpdate": "2024-10-26T20:36:00.861753"
}
```

- versionç‰ˆæœ¬æ§åˆ¶
	å‰ç«¯åˆ¤æ–­è¯·æ±‚çš„æ•°æ®ä¸­versionä¸ä¸€æ ·ï¼Œåˆ™é‡ç½®æ•°æ®

- notificationé€šçŸ¥å…¬å‘Š
	å‰ç«¯è·å–åˆ°é€šçŸ¥æ—¶ï¼Œåˆ¤æ–­å…¶æ˜¯å¦å’ŒåŸå…ˆä¿å­˜çš„idä¸€è‡´ã€‚ä¸ä¸€è‡´ï¼ˆæˆ–æ²¡æœ‰ï¼‰åˆ™ä¿å­˜å¹¶ä¸ºå…¶åŠ ä¸Š isRead: falseã€‚
	åœ¨layoutä¸­åˆå§‹åŒ–æ•°æ®åï¼Œåˆ¤æ–­isReadä¸ºfalseæ—¶æ˜¾ç¤ºé€šçŸ¥ï¼Œé€šè¿‡onCloseå›è°ƒæ¥è®¾ç½®isRead=true

- contactè”ç³»ä¿¡æ¯ã€friendå‹æƒ…é“¾æ¥ï¼Œå°†åœ¨å‰ç«¯å…³äºé¡µé¢ä½¿ç”¨

- bgmFileListç•ªå‰§æ•°æ®çš„ä¿¡æ¯


### bgm_data-.json
bgm_data-.jsonä¿å­˜ç•ªå‰§æ•°æ®ï¼ˆäºŒæœŸï¼‰
```json
[
	{
		"id": "bangumiç•ªå‰§IDï¼Œä¹Ÿåœ¨å‰ç«¯é‡Œç”¨ä½œid",
		"alistPath": "å¯¹åº”ç•ªå‰§çš„alistç½‘ç«™è·¯å¾„ï¼ˆäºŒæœŸå˜ä¸ºäº†å¿…é¡»ä¸ºå®Œæ•´ç½‘ç«™è·¯å¾„ï¼‰å¦‚ï¼šhttps://bangumi.sakiko.top/Bangumi/GIRLS%20BAND%20CRY",
		"bgmUrl": "bangumiç•ªå‰§é“¾æ¥",
		"img": "ç•ªå‰§å›¾ç‰‡",
		"name": "ç•ªå‰§åï¼ˆæ—¥è¯­ï¼‰",
		"chineseName": "ä¸­æ–‡å",
		"episode": "è¯æ•°",
		"date": "æ”¾é€å¼€å§‹æ—¥æœŸ",
		"weekday": "æ”¾é€æ˜ŸæœŸ",
		"score": "è¯„åˆ†",
		"tagList": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
		"aliasList": ["åˆ«å1", "åˆ«å2"],
		// ä¸ºäº†ç²¾ç®€ï¼Œåé¢çš„æ²¡æœ‰ä¿å­˜
		"content": "ç•ªå‰§ä»‹ç»",
		"charsInfo": [
			{
				"img": "è§’è‰²çš„å›¾ç‰‡"
			}
		],
		"comments": [
			{
				"img": "ç”¨æˆ·å¤´åƒ",
				"name": "ç”¨æˆ·å",
				"content": "è¯„è®ºå†…å®¹"
			}
		]
	}
]
```
è¿˜æ˜¯ä¿æŒç²¾ç®€æ¯”è¾ƒå¥½ï¼Œè¯„è®ºä»€ä¹ˆçš„å¤ªå¤§äº†ï¼Œæ²¡æœ‰ä¿å­˜


# ä¸‰ã€å‰ç«¯
**æ•°æ®ç•ªå‰§æ•°æ®è·å–ï¼š** è¯·æ±‚è·å–config.jsonï¼Œå¹¶æ ¹æ®å…¶å†…å®¹è·å–bgm_data.jsonï¼Œé€šè¿‡åˆ¤æ–­lastModifiedåœ¨å¿…è¦æ—¶é‡æ–°è·å–â€¦â€¦
[03-å‰ç«¯](03-å‰ç«¯.md)

### å®‰è£…ä¾èµ–
```sh
pnpm install
```

### ç¼–è¯‘å’Œçƒ­é‡è½½ç”¨äºå¼€å‘
```sh
pnpm dev
```

### ç±»å‹æ£€æŸ¥ã€ç¼–è¯‘å’Œå‹ç¼©ç”¨äºç”Ÿäº§
```sh
pnpm build
```

## ç›¸å…³è®¾ç½®
/index.html ä¸­é…ç½®ç½‘ç«™å›¾æ ‡ã€TDKæ ‡ç­¾SEOä¼˜åŒ–ã€DiscordåµŒå…¥
DiscordåµŒå…¥ï¼š https://docs.widgetbot.io/

/src/config/index.js ä¸­é…ç½®ä¼ªåç«¯æ–‡ä»¶åœ°å€ã€ç½‘ç«™åç§°ã€logoå›¾æ ‡ã€è”ç³»æ–¹å¼ï¼ˆèœå•æ å³ä¾§ï¼‰

å…³äºé¡µé¢éœ€è‡ªè¡Œåœ¨ /src/view/about/AboutPage.vue ä¿®æ”¹

ç½‘ç«™é€šçŸ¥ä¿¡æ¯ã€å…³äºé¡µé¢ä¸­çš„è”ç³»ä¿¡æ¯ã€å‹æƒ…é“¾æ¥ï¼Œåœ¨ [config.json](#config.json) ä¸­é…ç½®
